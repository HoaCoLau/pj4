<%- include('./partials/header', { pageTitle: pageTitle, isAdminPage: false }); %>
<%- include('./partials/navbar'); %>

<main role="main" class="container-fluid flex-grow-1 py-3">
    <div class="container mt-4">
        <div class="p-5 mb-4 bg-light rounded-3 shadow-sm">
            <div class="container-fluid py-5 text-center">
                <h1 class="display-4 fw-bold">Chào mừng đến với  Furniture!</h1>
                <p class="col-md-10 fs-5 mx-auto">Khám phá những sản phẩm nội thất hiện đại, chất lượng cao cho ngôi nhà của bạn. Tìm kiếm những món đồ hoàn hảo để tạo nên không gian mơ ước.</p>
                <a class="btn btn-primary btn-lg mt-3" href="/products" role="button">
                    <span data-feather="shopping-bag" class="align-text-bottom me-1"></span> Xem Tất Cả Sản Phẩm
                </a>
            </div>
        </div>

        <% if (typeof featuredCategories !== 'undefined' && featuredCategories.length > 0) { %>
        <h2 class="mb-4 text-center">Danh Mục Nổi Bật</h2>
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4 mb-5">
            <% featuredCategories.forEach(category => { %>
                <div class="col">
                    <div class="card h-100 text-center shadow-sm product-grid">
                        <div class="card-body">
                            <h5 class="card-title"><%= category.name %></h5>
                            <a href="/products?category=<%= encodeURIComponent(category.name) %>" class="btn btn-outline-secondary btn-sm stretched-link">Xem Sản Phẩm</a>
                        </div>
                    </div>
                </div>
            <% }); %>
        </div>
        <% } %>


        <h2 class="mb-4 text-center">Sản Phẩm Mới</h2>
         <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4 product-grid">
            <% if (typeof newProducts !== 'undefined' && newProducts.length > 0) { %>
                <% newProducts.forEach(product => { %>
                    <div class="col">
                        <div class="card h-100 shadow-sm">
                            <a href="/products/<%= product.id %>">
                                <img src="<%= product.imageUrl || '/images/placeholder.png' %>" class="card-img-top" alt="<%= product.name %>">
                            </a>
                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title fs-6">
                                    <a href="/products/<%= product.id %>" class="text-decoration-none text-dark stretched-link"><%= product.name %></a>
                                </h5>
                                <% if (product.category) { %>
                                <p class="card-text text-muted small mb-1"><%= product.category.name %></p>
                                <% } %>
                                <p class="card-text fw-bold mt-auto mb-2"><%= new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(product.price) %></p>
                            </div>
                             <div class="card-footer bg-transparent border-top-0 p-3">
                                 <a href="/products/<%= product.id %>" class="btn btn-sm btn-primary w-100">Xem Chi Tiết</a>
                                 </div>
                        </div>
                    </div>
                <% }); %>
            <% } else { %>
                <div class="col-12">
                    <p class="text-center text-muted">Hiện chưa có sản phẩm mới.</p>
                </div>
            <% } %>
        </div>
    </div>
</main>

<%- include('./partials/footer'); %>