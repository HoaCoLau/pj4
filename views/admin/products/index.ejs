{# views/admin/products/index.ejs #}
<div class="container admin-list">
    <h2><%= title %></h2>

    <a href="/admin/products/create" class="button">Thêm Sản phẩm mới</a>

     {# Thông báo success/error được hiển thị ở layout #}

    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Ảnh</th>
                <th>Tên Sản phẩm</th>
                <th>Giá</th>
                <th>Danh mục</th>
                <th>Số lượng tồn</th>
                <th>Hành động</th>
            </tr>
        </thead>
        <tbody>
            <% if (products && products.length > 0) { %>
                 <% products.forEach(product => { %>
                     <tr>
                         <td><%= product.id %></td>
                         <td>
                             <% if (product.image_url) { %>
                                 <img src="<%= product.image_url %>" alt="<%= product.name %>" width="50">
                             <% } else { %>
                                 Không có ảnh
                             <% } %>
                         </td>
                         <td><%= product.name %></td>
                         <td><%= product.price.toLocaleString('vi-VN') %> VNĐ</td>
                         <td><%= product.Category ? product.Category.name : 'Không có danh mục' %></td>
                         <td><%= product.stock_quantity %></td>
                         <td>
                             <a href="/admin/products/edit/<%= product.id %>">Sửa</a>
                             <form action="/admin/products/delete/<%= product.id %>" method="POST" style="display:inline;">
                                 <button type="submit" onclick="return confirm('Bạn có chắc chắn muốn xóa sản phẩm này?');">Xóa</button>
                             </form>
                         </td>
                     </tr>
                 <% }); %>
            <% } else { %>
                 <tr>
                      <td colspan="7">Chưa có sản phẩm nào.</td>
                 </tr>
            <% } %>
        </tbody>
    </table>
</div>