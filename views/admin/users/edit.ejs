<% layout('layouts/admin') -%>

<h1>Chỉnh sửa Người dùng: <%= user_detail.name %></h1>

<div class="row">
    <div class="col-md-6">
        <form action="/admin/users/edit/<%= user_detail.id %>?_method=PUT" method="POST">
            <input type="hidden" name="_method" value="PUT">
            <div class="mb-3">
                <label for="email" class="form-label">Email:</label>
                <input type="email" class="form-control" id="email" name="email" required value="<%= query.email || user_detail.email || '' %>">
            </div>
            <div class="mb-3">
                <label for="name" class="form-label">Tên:</label>
                <input type="text" class="form-control" id="name" name="name" required value="<%= query.name || user_detail.name || '' %>">
            </div>
             <div class="mb-3">
                <label for="image" class="form-label">URL Ảnh:</label>
                <input type="text" class="form-control" id="image" name="image" value="<%= query.image || user_detail.image || '' %>">
            </div>
            <div class="mb-3">
                <label for="role" class="form-label">Vai trò:</label>
                <select class="form-select" id="role" name="role" required>
                    <option value="user" <%= (query.role && query.role === 'user') || (user_detail.role === 'user' && !query.role) ? 'selected' : '' %>>user</option>
                    <option value="admin" <%= (query.role && query.role === 'admin') || (user_detail.role === 'admin' && !query.role) ? 'selected' : '' %>>admin</option>
                </select>
            </div>
            <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Cập nhật</button>
            <a href="/admin/users" class="btn btn-secondary ms-2"><i class="fas fa-arrow-left"></i> Trở về danh sách</a>
        </form>
    </div>
</div>
