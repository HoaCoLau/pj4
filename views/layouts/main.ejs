<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %> - Furniture Store</title>
    {# Link CSS based on whether it's an admin or client page #}
    <% if (locals.user && locals.user.role === 'admin' && title.startsWith('Quản lý')) { %>
        <link rel="stylesheet" href="/css/admin.css"> {# File CSS riêng cho admin #}
    <% } else { %>
        <link rel="stylesheet" href="/css/style.css"> {# File CSS chung cho client #}
    <% } %>
     {# Có thể thêm các link CSS khác tùy trang nếu cần #}
</head>
<body>

    {# Include header based on user role #}
    <% if (locals.user && locals.user.role === 'admin' && title.startsWith('Quản lý')) { %>
        <%- include('../partials/admin_header') %>
    <% } else { %>
        <%- include('../partials/client_header', { user: locals.user }) %> {# Truyền biến user vào partial #}
    <% } %>


    <main>
        {# Hiển thị thông báo thành công/lỗi #}
         <% if (typeof success !== 'undefined' && success) { %>
             <% if (Array.isArray(success)) { %>
                  <% success.forEach(msg => { %>
                       <p style="color: green; margin: 5px 0;"><%= msg %></p>
                  <% }); %>
             <% } else { %>
                 <p style="color: green; margin: 5px 0;"><%= success %></p>
             <% } %>
         <% } %>
        <% if (typeof error !== 'undefined' && error) { %>
             <% if (Array.isArray(error)) { %>
                 <% error.forEach(msg => { %>
                      <p style="color: red; margin: 5px 0;"><%= msg %></p>
                 <% }); %>
             <% else { %>
                  <p style="color: red; margin: 5px 0;"><%= error %></p>
             <% } %>
        <% } %>

        {# Đây là nơi nội dung riêng của từng view sẽ được chèn vào #}
        <%- body %>
    </main>

    <%- include('../partials/footer') %> {# Include footer #}

    {# Có thể thêm các script JS chung hoặc riêng tùy trang #}
    <script src="/js/script.js"></script> {# File JS chung #}
</body>
</html>